<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 5: Working with Imbalanced Data | BIT07 Machine Learning Course</title>
    <link rel="stylesheet" href="/bit07/assets/css/bundle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-3.1.0.min.js" charset="utf-8"></script>
</head>
<body class="min-h-screen">
    <header class="bg-gradient-to-r from-primary-600 via-primary-700 to-secondary-600 text-white shadow-xl sticky top-0 z-50">
        <nav id="navbar" class="container mx-auto px-4 py-4">
            <div class="flex flex-wrap items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <h1><a href="/bit07/" class="text-2xl font-bold hover:text-blue-100 transition-colors">BIT07 Machine Learning</a></h1>
                </div>

                <!-- Mobile menu button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-white hover:bg-opacity-10 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>

                <!-- Navigation menu -->
                <div id="nav-menu" class="hidden md:flex flex-wrap items-center space-x-1">
                    <a href="/bit07/" class="nav-link">Home</a>

                    <!-- Dropdown for Foundations -->
                    <div class="relative group">
                        <button class="nav-link flex items-center">
                            Foundations
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="/bit07/introduction/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Introduction</a>
                                <a href="/bit07/linear-regression/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Linear Regression</a>
                                <a href="/bit07/logistic-regression/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Logistic Regression</a>
                            </div>
                        </div>
                    </div>

                    <!-- Dropdown for Core Methods -->
                    <div class="relative group">
                        <button class="nav-link flex items-center">
                            Core Methods
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="/bit07/hyperparameter-tuning/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Hyperparameter Tuning</a>
                                <a href="/bit07/imbalanced-data/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Imbalanced Data</a>
                                <a href="/bit07/naive-bayes/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Naïve Bayes</a>
                                <a href="/bit07/decision-trees/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Decision Trees</a>
                            </div>
                        </div>
                    </div>

                    <!-- Dropdown for Advanced Topics -->
                    <div class="relative group">
                        <button class="nav-link flex items-center">
                            Advanced
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div class="absolute left-0 mt-2 w-56 bg-white rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                            <div class="py-2">
                                <a href="/bit07/ensemble-learning/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Ensemble Learning</a>
                                <a href="/bit07/clustering/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Clustering</a>
                                <a href="/bit07/dimensionality-reduction/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Dimensionality Reduction</a>
                                <a href="/bit07/ml-workflows/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">ML Workflows</a>
                                <a href="/bit07/neural-networks/" class="block px-4 py-2 text-gray-700 hover:bg-primary-50 hover:text-primary-600">Neural Networks</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile menu (hidden by default) -->
            <div id="mobile-nav" class="md:hidden mt-4 hidden">
                <div class="flex flex-col space-y-2">
                    <a href="/bit07/" class="nav-link-mobile">Home</a>
                    <a href="/bit07/introduction/" class="nav-link-mobile">Introduction</a>
                    <a href="/bit07/linear-regression/" class="nav-link-mobile">Linear Regression</a>
                    <a href="/bit07/logistic-regression/" class="nav-link-mobile">Logistic Regression</a>
                    <a href="/bit07/hyperparameter-tuning/" class="nav-link-mobile">Hyperparameters</a>
                    <a href="/bit07/imbalanced-data/" class="nav-link-mobile">Imbalanced Data</a>
                    <a href="/bit07/naive-bayes/" class="nav-link-mobile">Naïve Bayes</a>
                    <a href="/bit07/decision-trees/" class="nav-link-mobile">Decision Trees</a>
                    <a href="/bit07/ensemble-learning/" class="nav-link-mobile">Ensemble Learning</a>
                    <a href="/bit07/unsupervised-learning/" class="nav-link-mobile">Unsupervised Learning</a>
                    <a href="/bit07/ml-workflows/" class="nav-link-mobile">ML Workflows</a>
                    <a href="/bit07/neural-networks/" class="nav-link-mobile">Neural Networks</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="flex-1">
        <div class="container mx-auto px-4 py-8 max-w-6xl">
            
            <div class="mb-8 animate-fade-in">
                <h1 class="text-4xl md:text-5xl font-bold gradient-text mb-4">Chapter 5: Working with Imbalanced Data</h1>
                <div class="w-24 h-1 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full"></div>
            </div>
            

            <div class="prose prose-lg max-w-none animate-slide-up">
                <!-- Header -->
<div class="bg-gradient-to-r from-red-50 to-yellow-50 rounded-2xl p-6 mb-8">
    <h2 class="text-2xl font-bold text-gray-800 mb-2">Chapter 5: Working with Imbalanced Data</h2>
    <p class="text-gray-700 leading-relaxed">In many real-world classification problems, the distribution of classes is not equal. Imbalanced data is the norm, not the exception, in bioinformatics, where disease states or pathogenic variants are often rare. This presents a significant challenge for training effective machine learning models.</p>
</div>
<!-- 1. The Core Problem: The Accuracy Paradox -->
<div class="card mb-8">
    <h3 class="text-2xl font-bold text-gray-800 mb-4">The Core Problem: The Accuracy Paradox</h3>
    <p class="text-gray-700 mb-4">When a dataset is imbalanced, the standard evaluation metric, <strong>accuracy</strong>, becomes deeply misleading. A naive model that simply predicts the majority class for every single sample can achieve a very high accuracy score, despite being completely useless for identifying the minority class (which is often the class of interest).</p>
<p><div class="interactive-demo grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
<div>
<label class="block text-sm font-medium"># of Minority Samples (e.g., Cancer Patients)</label>
<input id="minority-slider" type="range" min="1" max="100" step="1" value="10" class="parameter-slider">
<p class="text-sm text-center"><span id="minority-count">10</span> Cancer Patients vs. <span id="majority-count">990</span> Healthy Individuals</p>
<p class="text-sm text-gray-600 mt-4">Below is the performance of a &quot;naive&quot; model that always predicts &quot;Healthy&quot;. Notice how high the accuracy is.</p>
</div>
<div class="text-center">
<div class="text-lg font-bold text-red-600">Naive Model Accuracy</div>
<div id="accuracy-paradox-display" class="text-5xl font-mono font-bold text-red-600 my-2">99.0%</div>
<div id="paradox-cm" class="grid grid-cols-3 gap-1 text-sm font-semibold w-full max-w-xs mx-auto"></div>
</div>
</div>
<div class="alert-warning mt-4"><strong>Conclusion:</strong> Relying on accuracy for imbalanced data is dangerous. We must use more informative metrics and specialized techniques.</div></p>
</div>
<!-- 2. Strategies for Handling Imbalance -->
<div class="card mb-8">
    <h3 class="text-2xl font-bold text-gray-800 mb-4">A Toolkit for Handling Imbalanced Data</h3>
    <p class="text-gray-700 mb-6">Several strategies can be employed to mitigate the effects of class imbalance. These can be broadly categorized into data-level, algorithm-level, and evaluation-level approaches.</p>
<p><!-- Data-Level Solutions -->
<h4 class="text-xl font-semibold text-gray-700 mb-4">1. Data-Level Solutions: Resampling Techniques</h4>
<p class="text-gray-600 mb-4">Resampling techniques modify the training dataset to create a more balanced class distribution. Visualize their effects on the data below.</p>
<div class="interactive-demo grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
<div class="space-y-3">
<h5 class="font-bold text-center">Select a Technique</h5>
<button data-technique="original" class="resample-btn btn-primary w-full">Original Data</button>
<button data-technique="under" class="resample-btn btn-secondary w-full">Random Undersampling</button>
<button data-technique="over" class="resample-btn btn-secondary w-full">Random Oversampling</button>
<button data-technique="smote" class="resample-btn btn-secondary w-full">SMOTE</button>
<div class="p-3 bg-gray-100 rounded text-center">
<p class="text-sm font-semibold">Class Counts</p>
<p id="class-counts-display" class="text-sm font-mono"></p>
</div>
</div>
<div class="md:col-span-2">
<div id="resampling-plot" style="width:100%;height:300px;"></div>
</div>
</div></p>
<p><!-- Algorithm-Level Solutions -->
<h4 class="text-xl font-semibold text-gray-700 mt-8 mb-4">2. Algorithm-Level Solutions: Class Weighting</h4>
<p class="text-gray-600 mb-4">This is often a simple and effective first step. Many algorithms have a <code>class_weight</code> parameter that modifies the loss function to penalize misclassifications of the minority class more heavily. It doesn't require modifying the data itself.</p>
<div class="code-block"></p>
<pre><code>from sklearn.svm import SVC

# Let the algorithm automatically adjust weights to be
# inversely proportional to class frequencies.
model = SVC(class_weight='balanced')

# Or, manually assign a higher weight to the minority class (e.g., class 1)
# This tells the model a mistake on class 1 is 10 times worse.
model = SVC(class_weight={0: 1, 1: 10})</code></pre>
<p></div></p>
<p><!-- Evaluation-Level Solutions -->
<h4 class="text-xl font-semibold text-gray-700 mt-8 mb-4">3. Evaluation-Level Solutions: Choosing the Right Scorer</h4>
<p class="text-gray-600 mb-4">As we've seen, accuracy is a poor metric. Instead, we should use metrics derived from the confusion matrix that provide a better picture of performance on the minority class, such as <strong>Precision, Recall, and F1-Score</strong>.</p>
<div class="highlight">
<strong>Making it Actionable: Hyperparameter Tuning</strong>
<p>When performing hyperparameter tuning with <code>GridSearchCV</code> or <code>RandomizedSearchCV</code>, it is crucial to change the default scoring metric from 'accuracy' to one that is robust to imbalance.</p></p>
<pre><code class="language-python">grid_search = GridSearchCV(
    estimator=model,
    param_grid=param_grid,
    cv=5,
    # Optimize for F1-score instead of accuracy!
    scoring='f1_weighted' # Other options: 'roc_auc', 'balanced_accuracy'
)</code></pre>
<p></div></p>
</div>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- 1. ACCURACY PARADOX DEMO ---
    const minoritySlider = document.getElementById('minority-slider');
    const minorityCountSpan = document.getElementById('minority-count');
    const majorityCountSpan = document.getElementById('majority-count');
    const accuracyDisplay = document.getElementById('accuracy-paradox-display');
    const paradoxCmDiv = document.getElementById('paradox-cm');

    function updateAccuracyParadox() {
        const minorityCount = parseInt(minoritySlider.value);
        const majorityCount = 1000 - minorityCount;
        
        minorityCountSpan.textContent = minorityCount;
        majorityCountSpan.textContent = majorityCount;
        
        // Naive model always predicts majority class (0)
        const tn = majorityCount;
        const fp = 0;
        const fn = minorityCount;
        const tp = 0;
        
        const accuracy = (tn / (tn + fn)) * 100;
        accuracyDisplay.textContent = `${accuracy.toFixed(1)}%`;
        
        paradoxCmDiv.innerHTML = `
            <div></div><div class="bg-gray-200 p-1">Predicted Healthy</div><div class="bg-gray-200 p-1">Predicted Cancer</div>
            <div class="bg-gray-200 p-1">Actual Cancer</div><div class="bg-red-200 p-2">FN: ${fn}</div><div class="bg-green-200 p-2">TP: ${tp}</div>
            <div class="bg-gray-200 p-1">Actual Healthy</div><div class="bg-blue-200 p-2">TN: ${tn}</div><div class="bg-yellow-200 p-2">FP: ${fp}</div>
        `;
    }
    minoritySlider.addEventListener('input', updateAccuracyParadox);
    updateAccuracyParadox();

    // --- 2. RESAMPLING DEMO ---
    const resampleBtns = document.querySelectorAll('.resample-btn');
    const resamplingPlotDiv = document.getElementById('resampling-plot');
    const classCountsDisplay = document.getElementById('class-counts-display');

    const generateImbalancedData = () => {
        let data = { x: [], y: [], labels: [] };
        // Majority class (0)
        for(let i=0; i<200; i++) {
            data.x.push(Math.random() * 4 + 1);
            data.y.push(Math.random() * 4 + 1);
            data.labels.push(0);
        }
        // Minority class (1)
        for(let i=0; i<20; i++) {
            data.x.push(Math.random() * 2 + 4);
            data.y.push(Math.random() * 2 + 4);
            data.labels.push(1);
        }
        return data;
    };

    const originalData = generateImbalancedData();

    const plotData = (data, title) => {
        const trace0 = {
            x: data.x.filter((_, i) => data.labels[i] === 0),
            y: data.y.filter((_, i) => data.labels[i] === 0),
            mode: 'markers', name: 'Majority (Healthy)', type: 'scatter',
            marker: { color: '#60a5fa', size: 7, opacity: 0.7 }
        };
        const trace1 = {
            x: data.x.filter((_, i) => data.labels[i] === 1),
            y: data.y.filter((_, i) => data.labels[i] === 1),
            mode: 'markers', name: 'Minority (Disease)', type: 'scatter',
            marker: { color: '#f97316', size: 7 }
        };
        const layout = {
            title: title,
            xaxis: { showticklabels: false, zeroline: false },
            yaxis: { showticklabels: false, zeroline: false },
            margin: { t: 40, r: 10, b: 10, l: 10 },
            legend: { x: 0, y: 1 }
        };
        Plotly.newPlot(resamplingPlotDiv, [trace0, trace1], layout);
        const majorityCount = data.labels.filter(l => l === 0).length;
        const minorityCount = data.labels.filter(l => l === 1).length;
        classCountsDisplay.innerHTML = `Majority: ${majorityCount}<br>Minority: ${minorityCount}`;
    };

    const applyResampling = (technique) => {
        let newData;
        let title = '';
        const minorityPoints = originalData.x.map((_, i) => ({x: originalData.x[i], y: originalData.y[i], label: originalData.labels[i]})).filter(p => p.label === 1);
        const majorityPoints = originalData.x.map((_, i) => ({x: originalData.x[i], y: originalData.y[i], label: originalData.labels[i]})).filter(p => p.label === 0);

        switch(technique) {
            case 'under':
                title = 'Random Undersampling';
                const shuffledMajority = majorityPoints.sort(() => 0.5 - Math.random());
                const underSampledMajority = shuffledMajority.slice(0, minorityPoints.length);
                const combinedUnder = [...minorityPoints, ...underSampledMajority];
                newData = {
                    x: combinedUnder.map(p => p.x),
                    y: combinedUnder.map(p => p.y),
                    labels: combinedUnder.map(p => p.label)
                };
                break;
            case 'over':
                title = 'Random Oversampling';
                let oversampledMinority = [...minorityPoints];
                while(oversampledMinority.length < majorityPoints.length) {
                    // add tiny amount of offset
                    let p = minorityPoints[Math.floor(Math.random() * minorityPoints.length)];
                    const offsetX = (Math.random() - 0.5) * 0.05;
                    const offsetY = (Math.random() - 0.5) * 0.05;
                    oversampledMinority.push({x: p.x + offsetX, y: p.y + offsetY, label: 1});
                }
                const combinedOver = [...majorityPoints, ...oversampledMinority];
                 newData = {
                    x: combinedOver.map(p => p.x),
                    y: combinedOver.map(p => p.y),
                    labels: combinedOver.map(p => p.label)
                };
                break;
            case 'smote':
                title = 'SMOTE (Synthetic Samples)';
                let smoteMinority = [...minorityPoints];
                while(smoteMinority.length < majorityPoints.length) {
                    const p1 = minorityPoints[Math.floor(Math.random() * minorityPoints.length)];
                    const p2 = minorityPoints[Math.floor(Math.random() * minorityPoints.length)];
                    const gap = Math.random();
                    const newX = p1.x + (p2.x - p1.x) * gap;
                    const newY = p1.y + (p2.y - p1.y) * gap;
                    smoteMinority.push({x: newX, y: newY, label: 1});
                }
                 const combinedSmote = [...majorityPoints, ...smoteMinority];
                 newData = {
                    x: combinedSmote.map(p => p.x),
                    y: combinedSmote.map(p => p.y),
                    labels: combinedSmote.map(p => p.label)
                };
                break;
            default:
                title = 'Original Imbalanced Data';
                newData = originalData;
        }
        plotData(newData, title);
    };

    resampleBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            resampleBtns.forEach(b => {
                b.classList.remove('btn-primary');
                b.classList.add('btn-secondary');
            });
            e.target.classList.remove('btn-secondary');
            e.target.classList.add('btn-primary');
            applyResampling(e.target.dataset.technique);
        });
    });
    
    applyResampling('original');
});
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
    // run code once
    applyResampling('original');
})
</script>
            </div>
        </div>
    </main>

    <!-- Floating Code Examples Toggle Button -->
    <button id="code-examples-toggle" aria-label="Open code examples"
            class="fixed bottom-6 right-6 z-50 rounded-full shadow-lg bg-primary-600 hover:bg-primary-700 text-white px-4 py-3 flex items-center gap-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 18l6-6-6-6M8 6l-6 6 6 6"></path>
        </svg>
        <span class="hidden md:inline">Code Examples</span>
    </button>

    <!-- Off-canvas Code Examples Panel -->
    <div id="code-examples-panel" class="fixed inset-0 z-50 hidden">
        <!-- Backdrop -->
        <div id="code-examples-backdrop" class="absolute inset-0 bg-black/40"></div>
        <!-- Panel -->
        <aside class="absolute right-0 top-0 h-full w-full md:w-[36rem] bg-white shadow-2xl border-l border-gray-200 flex flex-col">
            <div class="p-4 border-b flex items-center justify-between">
                <h2 class="text-lg font-semibold text-gray-800">Chapter Code Examples</h2>
                <button id="code-examples-close" class="p-2 rounded hover:bg-gray-100" aria-label="Close">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="code-examples-content" class="flex-1 overflow-y-auto p-4 space-y-6">
                <!-- Injected dynamically by interactive.js -->
            </div>
        </aside>
    </div>

    <footer id="footer" class="bg-gray-900 text-gray-300">
        <div class="container mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">BIT07 Machine Learning</h3>
                    <p class="text-gray-400">Comprehensive machine learning course for bioinformatics applications by Cedric Hermans.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/bit07/introduction/" class="text-gray-400 hover:text-primary-400 transition-colors">Getting Started</a></li>
                        <li><a href="/bit07/linear-regression/" class="text-gray-400 hover:text-primary-400 transition-colors">Linear Models</a></li>
                        <li><a href="/bit07/neural-networks/" class="text-gray-400 hover:text-primary-400 transition-colors">Deep Learning</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-primary-400 transition-colors">Course Materials</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-primary-400 transition-colors">Interactive Examples</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-primary-400 transition-colors">GitHub Repository</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center">
                <p>&copy; 2025 BIT07 Machine Learning Course by Cedric Hermans. Educational content for machine learning in bioinformatics.</p>
            </div>
        </div>
    </footer>

    <style>
        .nav-link {
            @apply px-3 py-2 rounded-lg text-sm font-medium hover:bg-white hover:bg-opacity-10 transition-colors whitespace-nowrap;
        }

        .nav-link-mobile {
            @apply block px-3 py-2 rounded-lg text-sm font-medium hover:bg-white hover:bg-opacity-10 transition-colors;
        }
    </style>

    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.classList.toggle('hidden');
        });

        // Toggle code examples panel
        document.getElementById('code-examples-toggle').addEventListener('click', function() {
            const panel = document.getElementById('code-examples-panel');
            panel.classList.toggle('hidden');
        });

        // Close code examples panel
        document.getElementById('code-examples-close').addEventListener('click', function() {
            const panel = document.getElementById('code-examples-panel');
            panel.classList.add('hidden');
        });

        // Initialize syntax highlighting
        hljs.highlightAll();

        // Add copy button to code blocks (static content)
        document.querySelectorAll('pre code').forEach((codeBlock) => {
            const button = document.createElement('button');
            button.className = 'absolute top-2 right-2 px-2 py-1 bg-gray-700 hover:bg-gray-600 text-gray-300 text-xs rounded transition-colors';
            button.textContent = 'Copy';

            button.addEventListener('click', () => {
                navigator.clipboard.writeText(codeBlock.textContent);
                button.textContent = 'Copied!';
                setTimeout(() => button.textContent = 'Copy', 2000);
            });

            codeBlock.parentNode.style.position = 'relative';
            codeBlock.parentNode.appendChild(button);
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
    <!-- Shared interactive demos bundle -->
    <script src="/bit07/assets/js/interactive.js"></script>
</body>
</html>
